StackLead=function(a){var t=new RegExp("[a-z0-9!#$%&'*+/=?^_`{|}~-]+(?:.[a-z0-9!#$%&'*+/=?^_`{|}~-]+)*@(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?"),n=/^(?:(?:\+?1\s*(?:[.-]\s*)?)?(?:\(\s*([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9])\s*\)|([2-9]1[02-9]|[2-9][02-8]1|[2-9][02-8][02-9]))\s*(?:[.-]\s*)?)?([2-9]1[02-9]|[2-9][02-9]1|[2-9][02-9]{2})\s*(?:[.-]\s*)?([0-9]{4})(?:\s*(?:#|x\.?|ext\.?|extension)\s*(\d+))?$/,s=100,i="sl-field",o="https://stacklead.com/api/client/leads";function u(){if(window.XMLHttpRequest){return new XMLHttpRequest}else{return new ActiveXObject("Microsoft.XMLHTTP")}}function r(t){var n=null;switch(t.type){case"select-multiple":var a=[];for(var e=0;e<t.options.length;e++)if(t.options[e].selected)a.push(t.options[e].value);n=a.tostring();break;case"radio":var r=document.getElementsByName(t.name);for(var e=0;e<r.length;e++)if(r[e].checked)n=r[e].value;break;case"checkbox":var i=document.getElementsByName(t.name);if(i.length>1){var s=[];for(var e=0;e<i.length;e++)if(i[e].checked)s.push(i[e].value);n=s.tostring()}else{n=t.checked?true:false}break;default:n=t.value}return n}function e(t){if(!(this instanceof e))return new e(t);if(!t||!t.client_key){console.warn("StackLead client key not configured");return}this.clientKey=t.client_key;this.automatic=typeof t.automatic==="undefined"?true:t.automatic;this.params=t.params||{delivery_method:"email"};this.person={};this.researched=[];this.boundElements=[];this.init()}e.prototype.init=function f(){var e=this;setInterval(function(){e._bindAll()},s)};e.prototype.capture=function c(e,i){var t=this;if(typeof e==="undefined"){e=t.person}else if(typeof e==="function"){i=e;e=t.person}else if(typeof e==="string"){e={email:e}}if(!e.email){return}if(t.researched.length>0){var m=t.researched.some(function(t){Object.keys(e).forEach(function(n){return t[n]&&e[n]===t[n]})});for(var a=0;a<t.researched.length;a++){var f=t.researched[a];var l=true;for(var s in e){if(!(s in f)||e[s]!==f[s]){l=false;break}}if(l){return}}if(m){return}}var n=u();n.onreadystatechange=function(){if(n.readyState===4){if(n.status===200){if(typeof i==="function"){i()}}else if(typeof i==="function"){i(new Error("bad status code: "+n.status+" message: "+n.responseText))}}};n.open("POST",o,true);n.setRequestHeader("Content-type","application/x-www-form-urlencoded");var r="client_key="+encodeURIComponent(this.clientKey)+"&person="+encodeURIComponent(JSON.stringify(e));if(this.params){var c=Object.keys(t.params).map(function(e){return e+"="+encodeURIComponent(t.params[e])}).join("&");if(c)r=r+"&"+c}n.send(r);this.researched.push(t.person);t.person={}};e.prototype._bindAll=function(){this._bindForms();this._bindInputs()};e.prototype._bindForms=function(){var n=this;if(!this.automatic){return}var t=document.getElementsByTagName("form");for(var e=0;e<t.length;e++){var i=t[e];n._bindForm(i)}};e.prototype._bindForm=function(e){if(typeof e.onsubmit==="function"&&e.onsubmit.name==="slOnSubmit"){return}var a=this;var o=[];var u=[e.getElementsByTagName("input"),e.getElementsByTagName("select"),e.getElementsByTagName("textarea")];u.forEach(function(t){for(var e=0;e<t.length;e++){o.push(t[e]);a.boundElements.push(t[e])}});var s=function(s){return function o(c){var d=e.getAttribute("sl-submitted");if(d==="submitted"||d==="invalid"){if(typeof s==="function"){return s.apply(this,[].slice.call(arguments))}else{return true}}var f=null;var h=function(){if(e.onsubmit(c)!==false){if(f&&typeof f.click==="function"){f.click()}else if(typeof e.submit==="function"){e.submit()}else if(typeof e.submit==="object"&&typeof e.submit.click==="function"){e.submit.click()}}};var l=[];var v=[e.getElementsByTagName("input"),e.getElementsByTagName("select"),e.getElementsByTagName("textarea")];v.forEach(function(t){for(var e=0;e<t.length;e++){l.push(t[e]);if(t[e].nodeName.toLowerCase()==="input"&&typeof t[e].type==="string"&&t[e].type.toLowerCase()==="submit"){f=t[e]}}});var u={};for(var m=0;m<l.length;m++){var p=l[m];var y=p.getAttribute(i)||p.name;var o=r(p);if(t.test(o)){u.email=o}else if(n.test(o)){u.phone=o}else{u[y]=o}}if(u.email){a.capture(u,function(t){e.setAttribute("sl-submitted",!!t?"invalid":"submitted");h()});if(c&&typeof c.preventDefault==="function"){c.preventDefault()}return false}else{e.setAttribute("sl-submitted","invalid");h();return false}}};if(typeof e.onsubmit==="function"){if(e.onsubmit.name!=="slOnSubmit"){e.onsubmit=s(e.onsubmit)}}else{e.onsubmit=s()}};e.prototype._bindInputs=function l(){var a=this;if(!this.automatic){return}var s=[];var l=[document.getElementsByTagName("input"),document.getElementsByTagName("select"),document.getElementsByTagName("textarea")];l.forEach(function(t){for(var e=0;e<t.length;e++){if(a.boundElements.indexOf(t[e])===-1){s.push(t[e])}}});var f=function(e){return function s(o){if(o instanceof KeyboardEvent&&o.keyCode!==13)return;var u=this.getAttribute(i)||this.name;var s=r(this);if(t.test(s)){a.person.email=s}else if(n.test(s)){a.person.phone=s}else{a.person[u]=s}if(a.person.email){a.capture(function(t){if(typeof e==="function"){return e(o)}})}}};var o=function(e,t,n){if(typeof e[t]==="function"){if(e[t].name!=="slTrackInputFn"){e[t]=f(e[t])}}else{e[t]=f()}};for(var u=0;u<s.length;u++){var e=s[u];if(e.type==="password"||e.slBound){continue}var c=(e.getAttribute("type")||"text").toLowerCase();if(c==="radio"||c==="checkbox"){o(e,"onchange")}else{o(e,"onblur");o(e,"onkeypress")}e.slBound=true}};return new e(a)}(window.StackLeadConfig);